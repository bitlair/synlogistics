<script type="text/javascript">
if (!Ext.ClassManager.isCreated('Search')) {
	Ext.define("Search", {
		extend: 'Ext.data.Model',
		fields: [
			{name: 'id', type: 'int' },
			{name: 'name', type: 'string'},
		]
	});
}

var relations = Ext.create('Ext.data.Store', {
	model: 'Search',
	pageSize: 10,
	proxy: {
		type: 'rest',
		url : '{{ BASE_URL }}ajax/relationsearch.json',
		reader: {
			type: 'json',
			root: 'relations',
		}
	},
});
Ext.create('Ext.form.Panel', {
		frame:true,
		title: 'Multi Column, Nested Layouts and Anchoring',
		bodyStyle:'padding:5px 5px 0',
		renderTo: 'editor-grid{{ uniquestring }}',
		height: '100%',
		fieldDefaults: {
			labelAlign: 'left',
			msgTarget: 'side'
		},

		items: [{
			xtype: 'container',
			anchor: '100%',
			layout:'column',
			items:[{
				xtype: 'container',
				columnWidth: .5,
				layout: 'anchor',
				items: [{
					xtype:'combo',
					store: relations,
					fieldLabel: 'Customer',
					hiddenField: 'id',
					displayField: 'name',
					typeAhead: false,
					forceSelection: true,
					name: 'customer',
					anchor: '96%',
					listeners: {
						select: function (field, record) {
							alert(record[0].get('name'));
						},
					},
				}, {
					xtype:'datefield',
					fieldLabel: 'Date',
					name: 'date',
					format: 'Y-m-d',
					maxValue: Ext.Date.format(new Date(), 'Y-m-d'),
					width: 250,
				}, {
					xtype: 'textfield',
					fieldLabel: 'Invoice number:',
					name: 'invoiceno',
					width: 250,
				}]
			},{
				xtype: 'container',
				columnWidth:.5,
				layout: 'anchor',
				items: [{
					xtype:'textfield',
					fieldLabel: 'Last Name',
					name: 'last',
					anchor:'100%'
				},{
					xtype:'textfield',
					fieldLabel: 'Email',
					name: 'email',
					vtype:'email',
					anchor:'100%'
				}]
			}]
		}, {
			xtype: 'htmleditor',
			name: 'bio',
			anchor: '100%',
			height: '100%',
		}],
		
		buttons: [{
				text: 'Save'
			},{
				text: 'Cancel'
			}]

	});
</script>
<div id="editor-grid{{ uniquestring }}"></div>
